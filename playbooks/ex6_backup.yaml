---
- name: Setup hourly database backup
  hosts: localhost
  connection: local
  become: yes

  tasks:

    - name: Create backup directory
      ansible.builtin.file:
        path: /backup
        state: directory
        mode: '0755'

    - name: Add hourly cron job for backup
      ansible.builtin.cron:
        name: "Hourly app data backup"
        minute: "0"
        job: "cp -r /root/app/data /backup/data_$(date +\\%Y\\%m\\%d_\\%H\\%M)"
